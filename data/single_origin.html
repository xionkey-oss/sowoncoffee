<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œì›ì»¤í”¼ - Single Origin Menu</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- í°íŠ¸: ê³ ìš´ ë‹ì›€ -->
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

    <!-- ì•„ì´ì½˜ (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #fdfbf7;
            color: #44403c;
            -webkit-tap-highlight-color: transparent;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .sold-out {
            opacity: 0.5;
            position: relative;
            filter: grayscale(100%);
        }

        /* ê´€ë¦¬ì ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ í´ë¦­ ë°©ì§€ */
        body:not(.admin-mode) .sold-out {
            pointer-events: none;
        }

        .sold-out::after {
            content: 'SOLD OUT';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-10deg);
            background-color: #ef4444;
            color: white;
            padding: 0.5rem 1rem;
            font-weight: bold;
            font-size: 1.2rem;
            border-radius: 0.5rem;
            border: 2px solid white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
    </style>
</head>

<body class="min-h-screen relative pb-24">

    <!-- Header -->
    <header
        class="sticky top-0 z-50 bg-[#fdfbf7]/95 backdrop-blur-sm border-b border-stone-200 shadow-sm transition-all duration-300">
        <div class="max-w-3xl mx-auto px-6 py-4 flex justify-between items-center">
            <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="cursor-pointer">
                <h1 class="text-2xl font-bold text-stone-800 tracking-tight">Sowon Coffee</h1>
                <p class="text-xs text-stone-500">Specialty Single Origin</p>
            </div>
            <div class="flex items-center space-x-2">
                <button onclick="toggleAdminMode()" id="admin-btn"
                    class="flex items-center px-3 py-1.5 rounded-full hover:bg-stone-100 transition text-stone-400 border border-transparent">
                    <i data-lucide="lock" class="w-4 h-4"></i>
                    <span class="ml-1 text-xs">ê´€ë¦¬</span>
                </button>
            </div>
        </div>

        <!-- Category Filter -->
        <nav class="max-w-3xl mx-auto px-4 pb-2">
            <div class="flex space-x-2 overflow-x-auto hide-scrollbar py-2">
                <button onclick="filterMenu('all')"
                    class="filter-btn active px-4 py-2 rounded-full text-sm font-bold bg-stone-800 text-white whitespace-nowrap transition-all shadow-md">
                    ì „ì²´ë³´ê¸°
                </button>
                <button onclick="filterMenu('daily')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    â˜• ë°ì¼ë¦¬
                </button>
                <button onclick="filterMenu('decaf')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    ğŸŒ¿ ë””ì¹´í˜ì¸
                </button>
                <button onclick="filterMenu('special')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    âœ¨ ìŠ¤í˜ì…œ
                </button>
                <button onclick="filterMenu('gesha')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    ğŸ† ê²Œìƒ¤
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto px-4 py-6">

        <!-- Admin Notice -->
        <div id="admin-notice"
            class="hidden mb-4 bg-stone-800 text-white px-4 py-3 rounded-lg text-sm flex justify-between items-center shadow-lg">
            <span class="flex items-center"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> ê´€ë¦¬ì ëª¨ë“œ: ë³€ê²½ì‚¬í•­ì´ ëª¨ë“  ê¸°ê¸°ì— ì‹¤ì‹œê°„
                ë°˜ì˜ë©ë‹ˆë‹¤.</span>
            <button onclick="toggleAdminMode()"
                class="text-xs bg-white text-stone-800 px-2 py-1 rounded font-bold">ì¢…ë£Œ</button>
        </div>

        <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Loading Indicator -->
            <div class="col-span-full text-center py-10 text-stone-400">
                <p>ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì¤‘...</p>
            </div>
        </div>

        <!-- Price Guide -->
        <div class="mt-8 bg-stone-100 rounded-xl p-6 text-sm text-stone-600 leading-relaxed shadow-inner">
            <h3 class="font-bold text-stone-800 mb-2 text-base flex items-center">
                <i data-lucide="info" class="w-4 h-4 mr-2"></i> ì´ìš© ì•ˆë‚´
            </h3>
            <ul class="space-y-2 list-disc list-inside text-xs sm:text-sm">
                <li>ëª¨ë“  í•¸ë“œë“œë¦½ì€ <span class="font-bold text-stone-800">HOT / ICE ê°€ê²©ì´ ë™ì¼</span>í•©ë‹ˆë‹¤.</li>
                <li>ì›ë‘ êµ¬ë§¤ ì‹œ <span class="font-bold text-stone-800">500g (20%), 1kg (30%) í• ì¸</span> ì ìš©ë©ë‹ˆë‹¤.</li>
                <li>ì»¤í”¼ë¥¼ ê³ ë¥´ê¸° ì–´ë ¤ìš°ì‹œë©´ ë°”ë¦¬ìŠ¤íƒ€ì—ê²Œ í¸í•˜ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.</li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-10 text-stone-400 text-xs">
        <p class="mb-2">Sowon Coffee Roastery</p>
        <p class="text-[10px] opacity-70">Single Origin Line-up</p>
    </footer>

    <!-- Firebase SDK (Module) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, onSnapshot, updateDoc, arrayUnion, arrayRemove, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // ==========================================
        // [ì„¤ì • ì™„ë£Œ] ì „ë‹¬ì£¼ì‹  í‚¤ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyBXjHZWtI5O9-w75oo8ozD0NDPdlVfX9-4",
            authDomain: "gen-lang-client-0558719080.firebaseapp.com",
            projectId: "gen-lang-client-0558719080",
            storageBucket: "gen-lang-client-0558719080.firebasestorage.app",
            messagingSenderId: "948106679587",
            appId: "1:948106679587:web:2290418581d5ebd0eca896",
            measurementId: "G-HJJG5GPJWQ"
        };
        // ==========================================

        let db;
        let soldOutItems = []; // Firebaseì—ì„œ ë°›ì•„ì˜¬ í’ˆì ˆ ë¦¬ìŠ¤íŠ¸

        // Firebase ì´ˆê¸°í™”
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            initRealtimeListener();
        } catch (e) {
            console.error("Firebase ì´ˆê¸°í™” ì˜¤ë¥˜:", e);
            alert("Firebase ì„¤ì • ì˜¤ë¥˜: ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
        }

        // ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” í•¨ìˆ˜
        async function initRealtimeListener() {
            const docRef = doc(db, "raontree", "menu_status"); // ì»¬ë ‰ì…˜: raontree, ë¬¸ì„œ: menu_status

            // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìµœì´ˆ ìƒì„± (ë¹ˆ ë¦¬ìŠ¤íŠ¸)
            // *ì£¼ì˜: ê¶Œí•œ ë¶€ì¡± ì˜¤ë¥˜ ì‹œ Firestore ê·œì¹™ì„ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
            try {
                // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
                onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        soldOutItems = docSnap.data().soldOutList || [];
                        console.log("ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¨:", soldOutItems);
                        renderMenu(currentCategory); // í™”ë©´ ê°±ì‹ 
                    } else {
                        // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒì„± ì‹œë„
                        setDoc(docRef, { soldOutList: [] });
                    }
                }, (error) => {
                    console.error("ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹  ì˜¤ë¥˜:", error);
                    // ê¶Œí•œ ì˜¤ë¥˜ ë“±ì˜ ê²½ìš° ë¡œì»¬ ë°ì´í„°ë¼ë„ ë³´ì—¬ì¤Œ
                    renderMenu(currentCategory);
                });
            } catch (e) {
                console.error("ë¦¬ìŠ¤ë„ˆ ì—°ê²° ì‹¤íŒ¨", e);
            }
        }

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ (ëª¨ë“ˆ ë°–ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë„ë¡)
        window.updateSoldOutStatus = async function (id) {
            if (!db) {
                alert("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨");
                return;
            }

            const docRef = doc(db, "raontree", "menu_status");
            const isSoldOut = soldOutItems.includes(id);

            try {
                if (isSoldOut) {
                    // í’ˆì ˆ í•´ì œ (ë°°ì—´ì—ì„œ ì œê±°)
                    await updateDoc(docRef, {
                        soldOutList: arrayRemove(id)
                    });
                } else {
                    // í’ˆì ˆ ì²˜ë¦¬ (ë°°ì—´ì— ì¶”ê°€)
                    await updateDoc(docRef, {
                        soldOutList: arrayUnion(id)
                    });
                }
                // renderMenu í˜¸ì¶œ ë¶ˆí•„ìš” (onSnapshotì´ ìë™ ê°ì§€)
            } catch (e) {
                console.error("ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", e);
                alert("ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: Firestore 'ê·œì¹™' íƒ­ì—ì„œ ì½ê¸°/ì“°ê¸° ê¶Œí•œì„ í—ˆìš©í–ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.");
            }
        };

        // --- ë©”ë‰´ ë°ì´í„° ---
        const menuData = [
            // 1. DAILY (Blend & Basic)
            { id: 'blend_purple', category: 'daily', country: 'Blend', name: 'ì†Œì›ì»¤í”¼ ë¸”ëœë“œ í¼í”Œ', note: 'ê³¼í…Œë§ë¼, ì—í‹°ì˜¤í”¼ì•„, ì½œë¡¬ë¹„ì•„, ë¸Œë¼ì§ˆ ë¸”ë Œë”©', priceDrip: 3300, priceBean: 5000, tags: ['House Blend'] },
            { id: 'colombia_popayan', category: 'daily', country: 'Colombia', name: 'ì½œë¡¬ë¹„ì•„ í¬íŒŒì–€ í´ë¼ì„ (Dark)', note: 'ì¹´ë¼ë©œ, ì•„ëª¬ë“œ, ë°€í¬ì´ˆì½œë¦¿, ë¸Œë¼ìš´ ìŠˆê°€, ë¬µì§í•¨', priceDrip: 5000, priceBean: 10000, tags: ['Dark'] },
            { id: 'guatemala_waykan', category: 'daily', country: 'Guatemala', name: 'ê³¼í…Œë§ë¼ ìš°ì—ìš°ì—í…Œë‚­ê³  ì™€ì´ì¹¸ (Dark)', note: 'ë°”ë‹ë¼, ì´ˆì½”, ë‹¨ë§›, ë³µí•©ì , ì¢‹ì€ ê· í˜•ê°', priceDrip: 5000, priceBean: 10000, tags: ['Dark'] },
            { id: 'costarica_shb', category: 'daily', country: 'Costa Rica', name: 'ì½”ìŠ¤íƒ€ë¦¬ì¹´ ì‚°í˜¸ì„¸ ë”°ë¼ì£¼ SHB (Dark)', note: 'ë§Œë‹¤ë¦°, ë¹„ìŠ¤í‚·, ì‹œë¦¬ì–¼, ë³¶ì€ ì•„ëª¬ë“œ, ë©”ì´í”Œì‹œëŸ½', priceDrip: 5000, priceBean: 10000, tags: ['Dark'] },

            // 2. DECAF
            { id: 'decaf_sidamo', category: 'decaf', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨ ë””ì¹´í˜ì¸ N', note: 'ë¯¼íŠ¸, ë³´ë¦¬, ë ˆëª¬ê·¸ë¼ìŠ¤, ì˜¤ë Œì§€, í¬ë„', priceDrip: 4300, priceBean: 12000, tags: ['Decaf'] },
            { id: 'decaf_brazil', category: 'decaf', country: 'Brazil', name: 'ë¸Œë¼ì§ˆ NY2 ê²Œë¥´ë§Œ CO2 (Decaf)', note: 'ì´ˆì½œë¦¿, ë¶€ë“œëŸ¬ì›€, ê· í˜•ê°', priceDrip: 4300, priceBean: 12000, tags: ['Decaf'] },

            // 3. SPECIAL (Includes Ethiopia, Kenya, Brazil Special, etc.)
            { id: 'ethiopia_limu', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ë¦¬ë¬´ ë ˆì‚¬ë“œ ì•„ë°”ë¶ˆêµ¬ N', note: 'ë³µìˆ­ì•„, ë¸”ë£¨ë² ë¦¬, í¬ëœë² ë¦¬, ì´ˆì½œë¦¿, ê¿€', priceDrip: 5500, priceBean: 12000, tags: ['Natural'] },
            { id: 'ethiopia_halo', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„ í• ë¡œ ë² ë¦¬í‹° W', note: 'ì˜¤ë Œì§€, ì‚¬íƒ•ìˆ˜ìˆ˜, ë°”ë‹ë¼, ì‚´êµ¬, ë°ì€ ì‚°ë¯¸', priceDrip: 5500, priceBean: 13000, tags: ['Washed'] },
            { id: 'ethiopia_shakiso', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ëª¨ êµ¬ì§€ ì‚¬í‚¤ì†Œ íƒ€ë° N', note: 'ì¹´ì¹´ì˜¤ë‹™ìŠ¤, ë² ë¦¬ë¥˜, ë©”ë¡ , ë¸Œë¼ìš´ìŠˆê°€, í™ì°¨', priceDrip: 5500, priceBean: 12000, tags: ['Natural'] },
            { id: 'ethiopia_jimma', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì§ë§ˆ ê²Œë¼ íˆ¬ë§ˆí…Œì†Œ W', note: 'ì˜¤ë Œì§€, ìë‘, ìš°ë¡±ì°¨, ì‹œíŠ¸ëŸ¬ìŠ¤', priceDrip: 5500, priceBean: 12000, tags: ['Washed'] },
            { id: 'ethiopia_bombee', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ë§ˆ ë²¤ì‚¬ ë´„ë²  N', note: 'í‘ì„¤íƒ•, ë¼ì„, í™ì°¨, ë°”ë‹ë¼, ììŠ¤ë¯¼', priceDrip: 5500, priceBean: 12000, tags: ['Natural'] },
            { id: 'ethiopia_arbegona', category: 'special', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì‹œë‹¤ë§ˆ ì•„ë¥´ë² ê³ ë‚˜ N', note: 'í¬ë„, ì•„ë¡œë‹ˆì•„, ë¸”ë£¨ë² ë¦¬, ì´ˆì½œë¦¿, ìºëŸ¬ë©œ', priceDrip: 5500, priceBean: 12000, tags: ['Natural'] },
            { id: 'brazil_grape', category: 'special', country: 'Brazil', name: 'ë¸Œë¼ì§ˆ ë¹ˆí•  ì²­í¬ë„ ì ¤ë¦¬', note: 'í¬ë„ì£¼ìŠ¤, ê±´í¬ë„, ì²­í¬ë„, íŒ¨ì…˜í›„ë¥´ì¸ , ì´ì¤‘ë°œíš¨', priceDrip: 5500, priceBean: 13000, tags: ['Unique'] },
            { id: 'brazil_coconut', category: 'special', country: 'Brazil', name: 'ë¸Œë¼ì§ˆ ë¹ˆí•  ì½”ì½”ë„›', note: 'ì½”ì½”ë„›, í—¤ì´ì¦ëŸ¿, ë°ì€ ì‚°ë¯¸, ì´ì¤‘ë°œíš¨', priceDrip: 5500, priceBean: 13000, tags: ['Unique'] },
            { id: 'kenya_mugaga', category: 'special', country: 'Kenya', name: 'ì¼€ëƒ ë¬´ê°€ê°€ í‚¤ì—ë‹ˆ AA TOP W', note: 'ì˜¤ë Œì§€, ì‚¬íƒ•ìˆ˜ìˆ˜, ë°”ë‹ë¼, ì‚´êµ¬, ë°ì€ ì‚°ë¯¸', priceDrip: 5500, priceBean: 13000, tags: ['Kenya'] },
            { id: 'colombia_melon', category: 'special', country: 'Colombia', name: 'ì½œë¡¬ë¹„ì•„ ì•ˆí‹°ì˜¤í‚¤ì•„ ì—˜ í‘¸íˆ¬ë¡œ ë©”ë¡  ë¬´ì‚°ì†Œ H', note: 'ë©œë¡ , ìˆ˜ë°•ë°”, ë”¸ê¸° ì•„ì´ìŠ¤í¬ë¦¼, ì‚¬ê³¼ì¥¬ìŠ¤, ì¹˜ì¦ˆì¼€ì´í¬', priceDrip: 7000, priceBean: 15000, tags: ['Funky'] },
            { id: 'colombia_pink_lactic', category: 'special', country: 'Colombia', name: 'ì½œë¡¬ë¹„ì•„ ì‚° ì•„ëŒí¬ ì—˜ ë””ë¹„ì†Œ í•‘í¬ë²„ë²ˆ ë½í‹± W', note: 'ë”¸ê¸°, ì¹´ë¼ë©œ, ë¶‰ì€ ê³¼ì¼ë¥˜, ë¼ë²¤ë”, ì‚¬ê³¼, ê³ ì¶”ì”¨', priceDrip: 8000, priceBean: 20000, tags: ['Pink Bourbon'] },

            // 4. GESHA
            { id: 'panama_mascarada', category: 'gesha', country: 'Panama', name: 'íŒŒë‚˜ë§ˆ ë§ˆìŠ¤ì¹´ë¼ë‹¤ ë¼ í”Œë£¨', note: 'ìŸˆìŠ¤ë¯¼, í° ê½ƒí–¥ê¸°, ì²­ì‚¬ê³¼, ë²„í„° ìŠ¤ì¹´ì¹˜', priceDrip: 10000, priceBean: 25000, tags: ['New', 'Special'] },
            { id: 'ethiopia_guji_natural', category: 'gesha', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì„œ êµ¬ì§€ ê²Œìƒ¤ N', note: 'ë³µìˆ­ì•„, ìëª½, ì í¬ë„, ì—˜ë”ë² ë¦¬ê½ƒ, ì‚°ë”¸ê¸°', priceDrip: 5500, priceBean: 12000, tags: ['Natural'] },
            { id: 'ethiopia_guji_anaerobic', category: 'gesha', country: 'Ethiopia', name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜¤ë¡œë¯¸ì•„ ì„œ êµ¬ì§€ ê²Œìƒ¤ ë¬´ì‚°ì†Œ W', note: 'ê³„í”¼, ë ˆë“œë² ë¦¬, ë°±í¬ë„, ë¸”ë™ì»¤ëŸ°íŠ¸, ì ¤ë¦¬', priceDrip: 5500, priceBean: 12000, tags: ['Anaerobic'] },
            { id: 'panama_esmeralda', category: 'gesha', country: 'Panama', name: 'íŒŒë‚˜ë§ˆ ì—ìŠ¤ë©”ë„ë‹¤ ê²Œìƒ¤ W', note: 'ìŸˆìŠ¤ë¯¼, ë² ë¥´ê°€ëª», ë ˆëª¬, ê¿€(ì¡°ì²­), ìš°ì•„í•¨', priceDrip: 12000, priceBean: 35000, tags: ['Best', 'Premium'] },
            { id: 'colombia_gesha_n', category: 'gesha', country: 'Colombia', name: 'ì½œë¡¬ë¹„ì•„ ë¶€ì—ì‚¬ì½” ë‚˜ë¦¬ë…¸ ë¡œìŠ¤ ì•™í—¬ë ˆìŠ¤ ê²Œìƒ¤ N', note: 'ë¼ë²¤ë”, í¬ë„, ë¸”ë™ë² ë¦¬, ë ˆëª¬ê·¸ë¼ìŠ¤, ì‚¬íƒ•ìˆ˜ìˆ˜', priceDrip: 8000, priceBean: 20000, tags: ['Gesha'] },
            { id: 'guatemala_gesha_anaerobic', category: 'gesha', country: 'Guatemala', name: 'ê³¼í…Œë§ë¼ ì•„ì¹´í…Œë‚­ê³  í•€ì¹´ ë¼ ì†”ë ˆë‹¤ë“œ ê²Œìƒ¤ ë¬´ì‚°ì†Œ W', note: 'í¬ë„, ìŠ¤í†¤í”„ë£», í™ì°¨, ì¹´ë¼ë©œ, ììŠ¤ë¯¼', priceDrip: 8000, priceBean: 20000, tags: ['Gesha'] },
            { id: 'guatemala_gesha_honey', category: 'gesha', country: 'Guatemala', name: 'ê³¼í…Œë§ë¼ ì•„ì¹´í…Œë‚­ê³  í•€ì¹´ ë¼ ì†”ë ˆë‹¤ë“œ ê²Œìƒ¤ H', note: 'í‘ì„¤íƒ•, ë¼ì„, í™ì°¨, ë°”ë‹ë¼, ììŠ¤ë¯¼', priceDrip: 8000, priceBean: 20000, tags: ['Gesha'] },
            { id: 'peru_gesha', category: 'gesha', country: 'Peru', name: 'í˜ë£¨ ë¼ íŒ”ë ˆìŠ¤í‹°ë‚˜ ê²Œìƒ¤ W', note: 'ì‚´êµ¬, ë§Œë‹¤ë¦°, ì–¼ê·¸ë ˆì´, ê¹”ë”í•¨', priceDrip: 8000, priceBean: 20000, tags: ['Gesha'] },
        ];

        // --- Country Info ---
        const countryInfo = {
            'Blend': { style: 'bg-stone-600 text-white border-stone-600', flagUrl: 'KakaoTalk_20211101_152531287_02.png' },
            'Ethiopia': { style: 'bg-rose-100 text-rose-800 border-rose-200', flagUrl: 'https://flagcdn.com/w20/et.png' },
            'Colombia': { style: 'bg-orange-100 text-orange-800 border-orange-200', flagUrl: 'https://flagcdn.com/w20/co.png' },
            'Guatemala': { style: 'bg-blue-100 text-blue-800 border-blue-200', flagUrl: 'https://flagcdn.com/w20/gt.png' },
            'Brazil': { style: 'bg-green-100 text-green-800 border-green-200', flagUrl: 'https://flagcdn.com/w20/br.png' },
            'Panama': { style: 'bg-indigo-100 text-indigo-800 border-indigo-200', flagUrl: 'https://flagcdn.com/w20/pa.png' },
            'Kenya': { style: 'bg-red-100 text-red-800 border-red-200', flagUrl: 'https://flagcdn.com/w20/ke.png' },
            'Costa Rica': { style: 'bg-teal-100 text-teal-800 border-teal-200', flagUrl: 'https://flagcdn.com/w20/cr.png' },
            'Peru': { style: 'bg-amber-100 text-amber-800 border-amber-200', flagUrl: 'https://flagcdn.com/w20/pe.png' },
            'Default': { style: 'bg-gray-100 text-gray-800 border-gray-200', flagUrl: '' }
        };

        // UI Variables
        const grid = document.getElementById('menu-grid');
        const btns = document.querySelectorAll('.filter-btn');
        let isAdminMode = false;
        let currentCategory = 'all';

        // Helper Functions
        window.formatPrice = (price) => price.toLocaleString();

        window.toggleAdminMode = () => {
            isAdminMode = !isAdminMode;
            document.body.classList.toggle('admin-mode', isAdminMode);

            const btn = document.getElementById('admin-btn');
            const notice = document.getElementById('admin-notice');

            if (isAdminMode) {
                btn.classList.add('bg-stone-800', 'text-white', 'border-transparent');
                btn.classList.remove('text-stone-400');
                btn.innerHTML = `<i data-lucide="unlock" class="w-4 h-4"></i><span class="ml-1 text-xs">ê´€ë¦¬</span>`;
                notice.classList.remove('hidden');
            } else {
                btn.classList.remove('bg-stone-800', 'text-white', 'border-transparent');
                btn.classList.add('text-stone-400');
                btn.innerHTML = `<i data-lucide="lock" class="w-4 h-4"></i><span class="ml-1 text-xs">ê´€ë¦¬</span>`;
                notice.classList.add('hidden');
            }
            lucide.createIcons();
            renderMenu(currentCategory);
        };

        window.toggleSoldOut = (id) => {
            if (typeof window.updateSoldOutStatus === 'function') {
                window.updateSoldOutStatus(id);
            } else {
                alert("Firebase ì—°ê²° ì „ì…ë‹ˆë‹¤.");
            }
        };

        window.filterMenu = (filterCategory) => {
            renderMenu(filterCategory);
        };

        // Render Function
        window.renderMenu = (filterCategory) => {
            currentCategory = filterCategory;
            grid.innerHTML = '';

            // Update Filter Buttons
            btns.forEach(btn => {
                const btnType = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
                if (btnType === filterCategory) {
                    btn.classList.remove('bg-white', 'text-stone-600', 'border');
                    btn.classList.add('bg-stone-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600', 'border');
                    btn.classList.remove('bg-stone-800', 'text-white');
                }
            });

            // Filter Data
            let filteredData = filterCategory === 'all'
                ? [...menuData]
                : menuData.filter(item => item.category === filterCategory);

            // Sort: Sold Out Items to Bottom
            filteredData.sort((a, b) => {
                const isASoldOut = soldOutItems.includes(a.id);
                const isBSoldOut = soldOutItems.includes(b.id);
                return (isASoldOut === isBSoldOut) ? 0 : isASoldOut ? 1 : -1;
            });

            // Draw Cards
            filteredData.forEach(item => {
                const isSoldOut = soldOutItems.includes(item.id);
                const soldOutClass = isSoldOut ? 'sold-out' : '';

                let tagsHtml = '';
                if (item.tags) {
                    item.tags.forEach(tag => {
                        let tagClass = 'text-stone-500 bg-stone-100';
                        if (tag === 'Gesha' || tag === 'Premium') tagClass = 'text-amber-700 bg-amber-50 border border-amber-100';
                        if (tag === 'Best' || tag === 'New') tagClass = 'text-red-600 bg-red-50 font-bold';
                        if (tag === 'Decaf') tagClass = 'text-green-700 bg-green-50';
                        tagsHtml += `<span class="text-[10px] px-2 py-0.5 rounded-full ${tagClass} mr-1">${tag}</span>`;
                    });
                }

                const country = countryInfo[item.country] || countryInfo['Default'];
                const flagHtml = country.flagUrl ? `<img src="${country.flagUrl}" alt="${item.country}" class="w-3 h-3 mr-1 inline-block" style="vertical-align: text-top;">` : '';

                const adminBtnHtml = isAdminMode ? `
                    <button onclick="event.stopPropagation(); toggleSoldOut('${item.id}')" 
                        class="absolute top-2 right-2 z-20 px-2 py-1 text-[10px] font-bold rounded shadow-sm border transition-colors cursor-pointer
                        ${isSoldOut
                        ? 'bg-red-500 text-white border-red-500 hover:bg-red-600'
                        : 'bg-white text-stone-500 border-stone-200 hover:bg-stone-50 hover:text-stone-800'}">
                        ${isSoldOut ? 'í’ˆì ˆ í•´ì œ' : 'í’ˆì ˆ ì²˜ë¦¬'}
                    </button>
                ` : '';

                const card = document.createElement('div');
                card.className = `relative bg-white rounded-xl p-5 shadow-sm border border-stone-100 transition-all ${soldOutClass}`;

                card.innerHTML = `
                    ${adminBtnHtml}
                    <div class="flex flex-col h-full justify-between">
                        <div>
                            <div class="flex items-center mb-2">
                                <span class="flex items-center text-[10px] font-bold px-2 py-0.5 rounded mr-2 border ${country.style}">
                                    ${flagHtml}
                                    ${item.country}
                                </span>
                            </div>
                            <div class="flex justify-between items-start mb-1">
                                <h3 class="font-bold text-stone-800 text-lg leading-snug break-keep pr-2">${item.name}</h3>
                                ${!isAdminMode && isSoldOut ? '<span class="text-xs font-bold text-red-500 border border-red-500 px-1 rounded whitespace-nowrap">í’ˆì ˆë¨</span>' : ''}
                            </div>
                            <p class="text-xs text-stone-500 mb-3 leading-relaxed">${item.note}</p>
                            <div class="flex flex-wrap mb-4">
                                ${tagsHtml}
                            </div>
                        </div>
                        <div class="flex justify-between items-end border-t border-stone-100 pt-3 mt-1">
                            <div class="text-center w-1/2 border-r border-stone-100 pr-2">
                                <span class="block text-[10px] text-stone-400 mb-0.5">í•¸ë“œë“œë¦½</span>
                                <span class="block font-bold text-stone-700 text-lg">${formatPrice(item.priceDrip)}</span>
                            </div>
                            <div class="text-center w-1/2 pl-2">
                                <span class="block text-[10px] text-stone-400 mb-0.5">ì›ë‘ (100g)</span>
                                <span class="block font-bold text-stone-600 text-base">${formatPrice(item.priceBean)}</span>
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        };

        // ì´ˆê¸° ì‹¤í–‰ (ì¼ë‹¨ ë¡œì»¬ ë°ì´í„°ë¡œ ê·¸ë¦¬ê¸°)
        renderMenu('all');
    </script>
</body>

</html>