<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œì›ì»¤í”¼ - Coffee & Recipe</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- í°íŠ¸: ê³ ìš´ ë‹ì›€ -->
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

    <!-- ì•„ì´ì½˜ (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #fdfbf7;
            color: #44403c;
            -webkit-tap-highlight-color: transparent;
            /* ëª¨ë°”ì¼ í„°ì¹˜ í•˜ì´ë¼ì´íŠ¸ ì œê±° */
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* ë ˆì‹œí”¼ ë°” ì• ë‹ˆë©”ì´ì…˜ */
        .recipe-bar-segment {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ê°€ê²© í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
        .price-transition {
            transition: color 0.3s ease;
        }
    </style>
</head>

<body class="min-h-screen relative pb-24">

    <!-- Header -->
    <header
        class="sticky top-0 z-50 bg-[#fdfbf7]/95 backdrop-blur-sm border-b border-stone-200 shadow-sm transition-all duration-300">
        <div class="max-w-2xl mx-auto px-6 py-4 flex justify-between items-center">
            <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="cursor-pointer">
                <h1 class="text-2xl font-bold text-stone-800 tracking-tight">Sowon Coffee</h1>
                <p class="text-xs text-stone-500">Coffee & Dessert Recipe</p>
            </div>
            <button onclick="scrollToInfo()" class="p-2 rounded-full hover:bg-stone-100 transition text-stone-600">
                <i data-lucide="info" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Category Filter -->
        <nav class="max-w-2xl mx-auto px-4 pb-2">
            <div class="flex space-x-2 overflow-x-auto hide-scrollbar py-2">
                <button onclick="filterMenu('all')"
                    class="filter-btn active px-4 py-2 rounded-full text-sm font-bold bg-stone-800 text-white whitespace-nowrap transition-all shadow-md">
                    ì „ì²´ë³´ê¸°
                </button>
                <button onclick="filterMenu('coffee')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    â˜• ì»¤í”¼
                </button>
                <button onclick="filterMenu('drink')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    ğŸ¥¤ ìŒë£Œ
                </button>
                <button onclick="filterMenu('dessert')"
                    class="filter-btn px-4 py-2 rounded-full text-sm font-bold bg-white text-stone-600 border border-stone-200 whitespace-nowrap hover:bg-stone-100 transition-all">
                    ğŸ° ë””ì €íŠ¸
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-2xl mx-auto px-4 py-6">
        <div id="menu-grid" class="grid grid-cols-1 gap-5">
            <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¹´ë“œê°€ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì²´í—˜/ìŠ¤í˜ì…œ ë©”ë‰´ ì„¹ì…˜ -->
        <div class="mt-12 mb-6" id="special-section">
            <h2 class="text-lg font-bold text-stone-800 mb-4 flex items-center">
                <i data-lucide="sparkles" class="w-5 h-5 mr-2 text-yellow-600"></i> ìŠ¤í˜ì…œ ì²´í—˜
            </h2>
            <div class="bg-white rounded-xl p-6 shadow-sm border border-stone-100">
                <div class="flex justify-between items-center border-b border-stone-100 pb-4 mb-4">
                    <div>
                        <h3 class="font-bold text-stone-800 text-lg">ë‚˜ë§Œì˜ ë“œë¦½ë°± ë§Œë“¤ê¸°</h3>
                        <p class="text-sm text-stone-500">2ì¸ ì´ìƒ ê°€ëŠ¥</p>
                    </div>
                    <span class="font-bold text-stone-700 text-lg">20,000ì›</span>
                </div>
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="font-bold text-stone-800 text-lg">ì»¤í”¼ íŠ¸ë˜ë¸”</h3>
                        <p class="text-sm text-stone-500">2ì¸ ì´ìƒ ê°€ëŠ¥</p>
                    </div>
                    <span class="font-bold text-stone-700 text-lg">30,000ì›</span>
                </div>
            </div>
        </div>

        <!-- Info Section -->
        <div id="info-section"
            class="mt-8 bg-stone-100 rounded-xl p-6 text-sm text-stone-600 leading-relaxed shadow-inner">
            <h3 class="font-bold text-stone-800 mb-4 text-base flex items-center">
                <i data-lucide="clipboard-list" class="w-4 h-4 mr-2"></i> ì£¼ë¬¸ ê°€ì´ë“œ
            </h3>
            <ul class="space-y-3 list-disc list-inside">
                <li><span class="font-bold text-stone-800">í•¸ë“œë“œë¦½ ì›ì¹™:</span> ì•„ë©”ë¦¬ì¹´ë…¸ëŠ” ê¸°ë³¸ í•¸ë“œë“œë¦½ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.</li>
                <li><span class="font-bold text-stone-800">ê°€ê²© ì •ì±…:</span> HOT / ICE ê°€ê²©ì€ ë™ì¼í•©ë‹ˆë‹¤. (ì¼ë¶€ ìŒë£Œ ì œì™¸)</li>
                <li><span class="font-bold text-stone-800">ê¸°ë³¸ 2ìƒ·:</span> ëª¨ë“  ì»¤í”¼ëŠ” ê¸°ë³¸ íˆ¬ ìƒ·(2 shot) ê¸°ì¤€ì…ë‹ˆë‹¤.</li>
                <li><span class="font-bold text-stone-800">ì¶”ê°€ ì˜µì…˜:</span> ìƒ· / ì‹œëŸ½ / íœ˜í•‘ ì¶”ê°€ ì‹œ ê¸ˆì•¡ì´ ë°œìƒí•©ë‹ˆë‹¤.</li>
                <li class="pt-3 border-t border-stone-200 mt-2 text-stone-700">
                    <span class="font-bold text-amber-700 bg-amber-50 px-2 py-0.5 rounded">Size Up</span>
                    ì•„ë©”ë¦¬ì¹´ë…¸ <span class="font-bold">+1.0</span> / ë¼ë–¼ <span class="font-bold">+1.5</span>
                </li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-10 text-stone-400 text-xs">
        <p class="mb-2">Sowon Coffee Recipe Menu</p>
        <p class="text-[10px] opacity-70">Updated 2024</p>
    </footer>

    <script>
        // --- ë°ì´í„° ì •ì˜ ---
        // recipe êµ¬ì¡°: 
        // 1. ë‹¨ì¼ ë ˆì‹œí”¼: ë°°ì—´ [...]
        // 2. ê°€ë³€ ë ˆì‹œí”¼(HOT/ICE): ê°ì²´ { hot: [...], ice: [...] }
        // prices êµ¬ì¡°: (ì˜µì…˜) HOT/ICE ê°€ê²©ì´ ë‹¤ë¥¸ ê²½ìš° { hot: 3500, ice: 4000 } í˜•íƒœë¡œ ì¶”ê°€
        const menuData = [
            // --- COFFEE ---
            {
                id: 'espresso', category: 'coffee', name: 'ì—ìŠ¤í”„ë ˆì†Œ', price: 3000, desc: 'ì§„í•œ ì»¤í”¼ì˜ ì •ìˆ˜ (19.5g)', tags: ['HOT'],
                recipe: [{ label: 'ì—ìŠ¤í”„ë ˆì†Œ 19.5g', color: 'bg-stone-900', width: '100%' }]
            },
            {
                id: 'americano_blend', category: 'coffee', name: 'ì•„ë©”ë¦¬ì¹´ë…¸ (ë¸”ë Œë“œ)', price: 3300, desc: 'í•¸ë“œë“œë¦½ ì¶”ì¶œ', tags: ['HOT', 'ICE'],
                isVariable: true,
                recipe: {
                    hot: [ // 1ì°¨ -> 2ì°¨ -> ë¬¼ -> í¬ì„ ìˆœì„œë¡œ ì •ë ¬ (ì™¼ìª½ë¶€í„°)
                        { label: '1ì°¨ 75', color: 'bg-stone-800', width: '25%' },
                        { label: '2ì°¨ 75', color: 'bg-stone-700', width: '25%' },
                        { label: 'ë¬¼ 100', color: 'bg-blue-100', width: '34%' },
                        { label: 'í¬ì„ 50', color: 'bg-blue-50', width: '16%' }
                    ],
                    ice: [ // 1ì°¨ -> 2ì°¨ -> ì–¼ìŒ ìˆœì„œë¡œ ì •ë ¬ (ì™¼ìª½ë¶€í„°)
                        { label: '1ì°¨ 75', color: 'bg-stone-800', width: '30%' },
                        { label: '2ì°¨ 75', color: 'bg-stone-700', width: '30%' },
                        { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '40%' }
                    ]
                }
            },
            {
                id: 'americano_single', category: 'coffee', name: 'ì‹±ê¸€ì˜¤ë¦¬ì§„ ì•„ë©”ë¦¬ì¹´ë…¸', price: 5000, desc: 'í”„ë¦¬ë¯¸ì—„ ì›ë‘ í•¸ë“œë“œë¦½', tags: ['HOT', 'ICE'],
                isVariable: true,
                recipe: {
                    hot: [ // 1ì°¨ -> 2ì°¨ -> 3ì°¨ -> 4ì°¨ ìˆœì„œë¡œ ì •ë ¬ (ì™¼ìª½ë¶€í„°)
                        { label: '1ì°¨ 75', color: 'bg-amber-900', width: '25%' },
                        { label: '2ì°¨ 75', color: 'bg-amber-800', width: '25%' },
                        { label: '3ì°¨ 75', color: 'bg-amber-700', width: '25%' },
                        { label: '4ì°¨ 75', color: 'bg-amber-600', width: '25%' }
                    ],
                    ice: [ // 1ì°¨ -> 2ì°¨ -> ì–¼ìŒ ìˆœì„œë¡œ ì •ë ¬ (ì™¼ìª½ë¶€í„°)
                        { label: '1ì°¨ 75', color: 'bg-amber-800', width: '30%' },
                        { label: '2ì°¨ 75', color: 'bg-amber-700', width: '30%' },
                        { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '40%' }
                    ]
                }
            },
            {
                id: 'cafe_latte', category: 'coffee', name: 'ì¹´í˜ ë¼ë–¼', price: 4300, desc: 'ê³ ì†Œí•œ ìš°ìœ ì™€ ì—ìŠ¤í”„ë ˆì†Œ', tags: ['HOT', 'ICE'],
                isVariable: true,
                recipe: {
                    hot: [ // ìƒ· + ìŠ¤íŒ€ìš°ìœ  220
                        { label: 'ìŠ¤íŒ€ìš°ìœ  220', color: 'bg-orange-50', width: '85%' },
                        { label: 'ìƒ·', color: 'bg-stone-800', width: '15%' }
                    ],
                    ice: [ // ìƒ· + ìš°ìœ  150 + ì–¼ìŒ
                        { label: 'ìš°ìœ  150', color: 'bg-orange-50', width: '50%' },
                        { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '30%' },
                        { label: 'ìƒ·', color: 'bg-stone-800', width: '20%' }
                    ]
                }
            },
            {
                id: 'coldbrew', category: 'coffee', name: 'ì½œë“œë¸Œë£¨', price: 4500, desc: 'ê¹”ë”í•œ ë§›', tags: ['ICE'],
                recipe: [ // ì–¼ìŒ + 70 + ë¬¼ 140
                    { label: 'ë¬¼ 140', color: 'bg-blue-50', width: '50%' },
                    { label: 'ì–¼ìŒ', color: 'bg-blue-100', width: '20%' },
                    { label: 'ì›ì•¡ 70', color: 'bg-stone-900', width: '30%' }
                ]
            },
            {
                id: 'coldbrew_latte', category: 'coffee', name: 'ì½œë“œë¸Œë£¨ ë¼ë–¼', price: 5000, desc: 'ë¶€ë“œëŸ¬ìš´ ë¼ë–¼', tags: ['ICE'],
                recipe: [ // ì–¼ìŒ + 90 + ìš°ìœ  90
                    { label: 'ìš°ìœ  90', color: 'bg-orange-50', width: '40%' },
                    { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '20%' },
                    { label: 'ì›ì•¡ 90', color: 'bg-stone-900', width: '40%' }
                ]
            },
            {
                id: 'sweet_latte', category: 'coffee', name: 'ë°”ë‹ë¼ / ëª¨ì¹´ / ë§ˆë¼ì•„ë˜', price: 4800, desc: 'ë‹¬ì½¤í•œ ë¼ë–¼ í†µí•©', tags: ['HOT', 'ICE'],
                isVariable: true,
                recipe: {
                    hot: [ // ìƒ· + ì‹œëŸ½40 + ìŠ¤íŒ€ìš°ìœ  220
                        { label: 'ìŠ¤íŒ€ìš°ìœ  220', color: 'bg-orange-50', width: '70%' },
                        { label: 'ì‹œëŸ½ 40', color: 'bg-yellow-400', width: '15%' },
                        { label: 'ìƒ·', color: 'bg-stone-800', width: '15%' }
                    ],
                    ice: [ // ìƒ· + ì‹œëŸ½40 + ì–¼ìŒ + ìš°ìœ  150
                        { label: 'ìš°ìœ  150', color: 'bg-orange-50', width: '45%' },
                        { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '25%' },
                        { label: 'ì‹œëŸ½ 40', color: 'bg-yellow-400', width: '15%' },
                        { label: 'ìƒ·', color: 'bg-stone-800', width: '15%' }
                    ]
                }
            },
            {
                id: 'einspanner', category: 'coffee', name: 'ì•„ì¸ìŠˆíŒ¨ë„ˆ (ë¹„ì—”ë‚˜)', price: 5000, desc: 'ë‹¨ì§ ë‹¨ì§  í¬ë¦¼ ì»¤í”¼', tags: ['Only ICE'],
                recipe: [ // 75 + 75 + íœ˜í•‘ 80 + ì†Œê¸ˆ/ì´ˆì½”
                    { label: 'í¬ë¦¼ 80(ì„¤íƒ•+ì†Œê¸ˆ)', color: 'bg-white border-b-4 border-stone-800', width: '30%' },
                    { label: '2ì°¨ 75', color: 'bg-stone-800', width: '35%' },
                    { label: '1ì°¨ 75', color: 'bg-stone-900', width: '35%' }
                ]
            },

            // --- DRINK ---
            {
                id: 'tea_chamomile', category: 'drink', name: 'ìœ ê¸°ë† í—ˆë¸Œì°¨ (ìºëª¨ë§ˆì¼)', price: 3500, desc: 'ì‹¬ì‹  ì•ˆì • (ICE +500ì›)', tags: ['HOT', 'ICE'],
                isVariable: true,
                prices: { hot: 3500, ice: 4000 }, // ê°€ê²© ë³€ë™ ì„¤ì •
                recipe: {
                    hot: [{ label: 'ë¬¼ ê°€ë“ + 2ë¶„', color: 'bg-yellow-50', width: '100%' }],
                    ice: [
                        { label: 'ì–¼ìŒ ê°€ë“', color: 'bg-blue-50', width: '40%' },
                        { label: 'ì‹í˜', color: 'bg-blue-100', width: '20%' },
                        { label: '2íŒ© 1ë¶„', color: 'bg-yellow-100', width: '40%' }
                    ]
                }
            },
            {
                id: 'fruit_latte', category: 'drink', name: 'ìˆ˜ì œ ê³¼ì¼ ë¼ë–¼', price: 5000, desc: 'ë”¸ê¸° ë“± ê³„ì ˆ ê³¼ì¼', tags: ['ICE'],
                recipe: [ // ì–¼ìŒ + ê³¼ì¼ì²­ 80 + ìš°ìœ  150
                    { label: 'ìš°ìœ  150', color: 'bg-orange-50', width: '50%' },
                    { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '20%' },
                    { label: 'ê³¼ì¼ì²­ 80', color: 'bg-red-400', width: '30%' }
                ]
            },
            {
                id: 'passion_fruit', category: 'drink', name: 'ìˆ˜ì œ íŒ¨ì…˜í›„ë¥´ì¸ ', price: 5000, desc: 'ìƒí¼í•œ ì—ì´ë“œ', tags: ['ICE'],
                recipe: [ // ì–¼ìŒ + ì²­ 80 + ë¬¼ ê°€ë“
                    { label: 'ë¬¼ ê°€ë“', color: 'bg-blue-50', width: '50%' },
                    { label: 'ì–¼ìŒ', color: 'bg-blue-100', width: '20%' },
                    { label: 'ì²­ 80', color: 'bg-yellow-400', width: '30%' }
                ]
            },
            {
                id: 'carrot_apple', category: 'drink', name: 'ë‹¹ê·¼ì•„ ì‚¬ê³¼í•´', price: 5000, desc: '100% ì°©ì¦™ ì¥¬ìŠ¤ (ì‘ì€ì»µ)', tags: ['ICE'],
                recipe: [ // ì‘ì€ì»µ (ì–¼ìŒ + ë‹¹ê·¼1 + ì‚¬ê³¼1)
                    { label: 'ì–¼ìŒ', color: 'bg-blue-50', width: '20%' },
                    { label: 'ì‚¬ê³¼ 1íŒ©', color: 'bg-red-200', width: '40%' },
                    { label: 'ë‹¹ê·¼ 1íŒ©', color: 'bg-orange-400', width: '40%' }
                ]
            },
            {
                id: 'choco_greentea', category: 'drink', name: 'ì´ˆì½” / ë…¹ì°¨ ë¼ë–¼', price: 4000, desc: 'ë‹¬ì½¤ ìŒ‰ì‹¸ë¦„', tags: ['HOT', 'ICE'],
                recipe: [
                    { label: 'ìš°ìœ  150ml', color: 'bg-orange-50', width: '70%' },
                    { label: 'íŒŒìš°ë” 40g', color: 'bg-green-700', width: '30%' }
                ]
            },
            {
                id: 'iced_tea', category: 'drink', name: 'ë³µìˆ­ì•„ ì•„ì´ìŠ¤í‹°', price: 3000, desc: 'ì‹œì›í•œ ì•„ì´ìŠ¤í‹°', tags: ['ICE'],
                recipe: [
                    { label: 'ë¬¼', color: 'bg-blue-50', width: '60%' },
                    { label: 'ì–¼ìŒ', color: 'bg-blue-100', width: '20%' },
                    { label: 'ì›ì•¡ 80ml', color: 'bg-amber-600', width: '20%' }
                ]
            },

            // --- DESSERT ---
            {
                id: 'cake_basque', category: 'dessert', name: 'ë°”ìŠ¤í¬ ì¹˜ì¦ˆì¼€ì´í¬', price: 6000, desc: 'ì§„í•œ ì¹˜ì¦ˆì˜ í’ë¯¸', tags: ['CAKE'], recipe: null
            },
            {
                id: 'cake_strawberry', category: 'dessert', name: 'ë”¸ê¸° ì¼€ì´í¬', price: 7000, desc: 'ë¶€ë“œëŸ¬ìš´ ìƒí¬ë¦¼', tags: ['Season'], recipe: null
            },
            {
                id: 'snack_oranda', category: 'dessert', name: 'ìˆ˜ì œ ì˜¤ë€ë‹¤', price: 2000, desc: 'ë°”ì‚­í•˜ê³  ë‹¬ì½¤í•œ ê°„ì‹', tags: ['Snack'], recipe: null
            },
            {
                id: 'snack_walnut', category: 'dessert', name: 'ìˆ˜ì œ í˜¸ë‘ì •ê³¼', price: 5000, desc: 'ê³ ì†Œí•œ ì˜ì–‘ ê°„ì‹ (ì„ ë¬¼ìš© 1.5ë§Œ)', tags: ['Gift'], recipe: null
            }
        ];

        const grid = document.getElementById('menu-grid');
        const btns = document.querySelectorAll('.filter-btn');

        function formatPrice(price) {
            return price.toLocaleString() + 'ì›';
        }

        function scrollToInfo() {
            document.getElementById('info-section').scrollIntoView({ behavior: 'smooth' });
        }

        // ì¸í¬ê·¸ë˜í”½ ë°” ìƒì„± í•¨ìˆ˜ (ë‹¨ì¼ ë˜ëŠ” Hot/Ice)
        function createRecipeBarHtml(recipeData, type = 'default') {
            if (!recipeData) return '';

            // ê·¸ë˜í”„ ë°” ë†’ì´ h-8
            let barHtml = `<div class="mt-4 w-full h-8 bg-stone-100 rounded-lg overflow-hidden flex shadow-inner border border-stone-200 recipe-bar-segment">`;

            recipeData.forEach(part => {
                const isDark = part.color.includes('stone-900') || part.color.includes('stone-800') || part.color.includes('stone-700') || part.color.includes('green-700') || part.color.includes('amber-800');
                const textColor = isDark ? 'text-white/90' : 'text-stone-700/90';

                barHtml += `<div class="${part.color} h-full flex items-center justify-center text-xs font-bold ${textColor} relative group hover:opacity-90 transition-opacity" style="width: ${part.width}">
                    <span class="truncate px-1">${part.label}</span>
                </div>`;
            });
            barHtml += '</div>';
            return barHtml;
        }

        function toggleRecipe(id, type) {
            const container = document.getElementById(`recipe-container-${id}`);
            const item = menuData.find(m => m.id === id);
            if (!item || !item.recipe[type]) return;

            // Update Buttons
            const btnHot = document.getElementById(`btn-hot-${id}`);
            const btnIce = document.getElementById(`btn-ice-${id}`);

            if (type === 'hot') {
                btnHot.classList.add('bg-red-100', 'text-red-700', 'border-red-200');
                btnHot.classList.remove('bg-white', 'text-stone-400');
                btnIce.classList.remove('bg-blue-100', 'text-blue-700', 'border-blue-200');
                btnIce.classList.add('bg-white', 'text-stone-400');
            } else {
                btnIce.classList.add('bg-blue-100', 'text-blue-700', 'border-blue-200');
                btnIce.classList.remove('bg-white', 'text-stone-400');
                btnHot.classList.remove('bg-red-100', 'text-red-700', 'border-red-200');
                btnHot.classList.add('bg-white', 'text-stone-400');
            }

            // Update Price (if variable price exists)
            if (item.prices && item.prices[type]) {
                const priceEl = document.getElementById(`price-${id}`);
                if (priceEl) {
                    priceEl.innerText = formatPrice(item.prices[type]);
                    // ë°˜ì§ì´ëŠ” íš¨ê³¼ ì¶”ê°€
                    priceEl.classList.remove('text-stone-700');
                    priceEl.classList.add('text-stone-400');
                    setTimeout(() => {
                        priceEl.classList.remove('text-stone-400');
                        priceEl.classList.add('text-stone-700');
                    }, 150);
                }
            }

            // Update Bar
            container.innerHTML = createRecipeBarHtml(item.recipe[type]);
        }

        function renderMenu(filterCategory) {
            grid.innerHTML = '';

            // í•„í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            btns.forEach(btn => {
                if (btn.innerText.includes(filterCategory === 'all' ? 'ì „ì²´' :
                    filterCategory === 'coffee' ? 'ì»¤í”¼' :
                        filterCategory === 'drink' ? 'ìŒë£Œ' : 'ë””ì €íŠ¸')) {
                    btn.classList.remove('bg-white', 'text-stone-600', 'border');
                    btn.classList.add('bg-stone-800', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600', 'border');
                    btn.classList.remove('bg-stone-800', 'text-white');
                }
            });

            const filteredData = filterCategory === 'all'
                ? menuData
                : menuData.filter(item => item.category === filterCategory);

            filteredData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl p-5 shadow-sm border border-stone-100 hover:shadow-md transition-shadow duration-300';

                // Tags
                let tagsHtml = '';
                if (item.tags) {
                    item.tags.forEach(tag => {
                        let tagClass = 'text-stone-500 bg-stone-100';
                        if (tag === 'HOT') tagClass = 'text-red-600 bg-red-50 border border-red-100';
                        if (tag === 'ICE') tagClass = 'text-blue-600 bg-blue-50 border border-blue-100';
                        if (tag === 'Only ICE') tagClass = 'text-blue-700 bg-blue-100 font-bold';
                        if (tag === 'Best' || tag === 'Gift') tagClass = 'text-amber-700 bg-amber-50 border border-amber-100';

                        tagsHtml += `<span class="text-[10px] px-2 py-0.5 rounded-full ${tagClass} mr-1">${tag}</span>`;
                    });
                }

                // Recipe Area Logic
                let recipeHtml = '';
                if (item.recipe) {
                    if (item.isVariable) {
                        // Variable (Hot/Ice Switcher)
                        // Default to Hot if available, else Ice
                        const initialType = 'hot';
                        const initialRecipe = item.recipe.hot;

                        recipeHtml = `
                            <div class="mt-4 flex space-x-2">
                                <button id="btn-hot-${item.id}" onclick="toggleRecipe('${item.id}', 'hot')" class="text-xs px-3 py-1 rounded-full border border-red-200 bg-red-100 text-red-700 font-bold transition-colors">HOT</button>
                                <button id="btn-ice-${item.id}" onclick="toggleRecipe('${item.id}', 'ice')" class="text-xs px-3 py-1 rounded-full border border-stone-200 bg-white text-stone-400 font-medium hover:bg-stone-50 transition-colors">ICE</button>
                            </div>
                            <div id="recipe-container-${item.id}">
                                ${createRecipeBarHtml(initialRecipe)}
                            </div>
                        `;
                    } else {
                        // Static Recipe
                        recipeHtml = createRecipeBarHtml(item.recipe);
                    }
                }

                card.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-bold text-stone-800 text-lg tracking-tight">${item.name}</h3>
                            <p class="text-xs text-stone-400 mt-1">${item.desc}</p>
                        </div>
                        <span id="price-${item.id}" class="price-transition font-bold text-stone-700 text-lg whitespace-nowrap">${formatPrice(item.price)}</span>
                    </div>
                    <div class="flex flex-wrap mt-2">
                        ${tagsHtml}
                    </div>
                    ${recipeHtml}
                `;
                grid.appendChild(card);
            });
        }

        // ì´ˆê¸° ë Œë”ë§
        renderMenu('all');
        lucide.createIcons();

        // ì „ì—­ í•¨ìˆ˜
        window.filterMenu = renderMenu;
        window.scrollToInfo = scrollToInfo;
        window.toggleRecipe = toggleRecipe;

    </script>
</body>

</html>